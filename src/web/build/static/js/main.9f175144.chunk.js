(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{147:function(e,t,n){e.exports=n(324)},152:function(e,t,n){},30:function(e,t){e.exports={api_url:"/api"}},322:function(e,t,n){},324:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(31),i=n.n(o),c=(n(152),n(18)),s=n(19),u=n(21),l=n(20),p=n(22),m=n(26),h=n(37),f=n(131),d=n(132),b=n(7),g="START_LOGIN",j="LOGIN_SUCCESSFULL",E="LOGIN_FAIL",v="LOGIN_HANDLE_ERROR",C={startLogin:!1,loginSuccessfull:!1,error:null},O="START_SIGNUP",y="SIGNUP_SUCCESSFULL",S="SIGNUP_FAIL",w="SIGNUP_HANDLE_ERROR",_={startSignup:!1,signupSuccessfull:!1,error:null},k="REQUEST_PROJECT_CREATED",L="PROJECT_CREATED_FETCH_SUCCESSFULL",D="PROJECT_CREATED_FETCH_FAIL",P="PROJECT_CREATED_HANDLE_ERROR",R="PROJECT_CREATED_CREATE_SUCCESSFULL",T="PROJECT_CREATED_DELETE_SUCCESSFULL",U="PROJECT_CREATED_UPDATE_SUCCESSFULL",A={isLoading:!1,projects:[],error:null},I="REQUEST_PROJECT_ASSIGN",N="PROJECT_ASSIGN_FETCH_SUCCESSFULL",x="PROJECT_ASSIGN_FETCH_FAIL",M="PROJECT_ASSIGN_HANDLE_ERROR",F={isLoading:!1,projects:[],error:null},J="REQUEST_LIST_USER",W="LIST_USER_FETCH_SUCCESSFULL",H="LIST_USER_FETCH_FAIL",B="LIST_USER_HANDLE_ERROR",G={isLoading:!1,users:[],error:null},Y="REQUEST_PROJECT_MEMBER",Q="PROJECT_MEMBER_FETCH_SUCCESSFULL",z="PROJECT_MEMBER_FETCH_FAIL",X="PROJECT_MEMBER_HANDLE_ERROR",$="PROJECT_MEMBER_ASSIGN",q="PROJECT_MEMBER_UNASSIGN",K={isLoading:!1,members:[],error:null},V=Object(h.c)({loginData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g:return Object(b.a)({},e,{startLogin:!0});case j:return Object(b.a)({},e,{startLogin:!1,loginSuccessfull:!0});case E:return Object(b.a)({},e,{startLogin:!1,error:t.err});case v:return Object(b.a)({},e,{error:null});default:return e}},signupData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case O:return Object(b.a)({},e,{startSignup:!0});case y:return Object(b.a)({},e,{startSignup:!1,signupSuccessfull:!0});case S:return Object(b.a)({},e,{startSignup:!1,error:t.err});case w:return Object(b.a)({},e,{error:null});default:return e}},projectCreatedData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case k:return Object(b.a)({},e,{isLoading:!0});case L:return Object(b.a)({},e,{isLoading:!1,projects:t.projects});case D:return Object(b.a)({},e,{isLoading:!1,error:t.error});case P:return Object(b.a)({},e,{isLoading:!1,error:null});case R:return Object(b.a)({},e,{isLoading:!1,projects:e.projects.concat(t.projects)});case T:return Object(b.a)({},e,{isLoading:!1,projects:e.projects.filter(function(e){return e._id!==t.projectID})});case U:return Object(b.a)({},e,{isLoading:!1,projects:e.projects.map(function(e){return e._id===t.project._id?Object.assign(e,t.project):e})});default:return e}},projectAssignData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case I:return Object(b.a)({},e,{isLoading:!0});case N:return Object(b.a)({},e,{isLoading:!1,projects:t.projects});case x:return Object(b.a)({},e,{isLoading:!1,error:t.error});case M:return Object(b.a)({},e,{error:null});default:return e}},memberData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case J:return Object(b.a)({},e,{isLoading:!0});case W:return Object(b.a)({},e,{isLoading:!1,users:t.users});case H:return Object(b.a)({},e,{isLoading:!1,error:t.error});case B:return Object(b.a)({},e,{error:null});default:return e}},projectMemberData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Y:return Object(b.a)({},e,{isLoading:!0});case Q:return Object(b.a)({},e,{isLoading:!1,members:t.members});case z:return Object(b.a)({},e,{isLoading:!1,error:t.error});case X:return Object(b.a)({},e,{error:null});case $:return Object(b.a)({},e,{members:e.members.concat([t.member])});case q:return Object(b.a)({},e,{members:e.members.filter(function(e){return e._id!==t.memberID})});default:return e}}}),Z=Object(f.createLogger)({timestamps:!0,duration:!0}),ee=Object(h.e)(V,Object(h.d)(Object(h.a)(Z,d.a))),te=n(327),ne=n(328),re=n(146),ae=n(326),oe=n(10),ie=n.n(oe),ce=n(29),se=n(30),ue=n.n(se);function le(e){var t=new Headers({"Content-Type":"application/json; charset=utf-8",Accept:"application/json"});return(e=e||me())&&t.append("x-access-token",e),t}var pe="token";function me(){return sessionStorage.getItem(pe)}function he(e){sessionStorage.setItem(pe,e)}function fe(e,t,n,r){return new Promise(function(){var a=Object(ce.a)(ie.a.mark(function a(o,i){return ie.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",fetch(ue.a.api_url+"/users",{method:"POST",body:JSON.stringify({user:{username:e,password:t,full_name:n,phone:r}})}).then(function(e){return e.json()}).then(function(e){if(0===e.status)return i(e.error.message);o(e.result)}).catch(function(e){return i(e)}));case 1:case"end":return a.stop()}},a,this)}));return function(e,t){return a.apply(this,arguments)}}())}function de(){return!!me()}var be=function(e){var t=e.component,n=Object(re.a)(e,["component"]);return a.a.createElement(ne.a,Object.assign({},n,{render:function(e){return de()?a.a.createElement(t,e):a.a.createElement(ae.a,{to:{pathname:"/",state:{from:e.location}}})}}))},ge=n(13);function je(e,t){return function(n){n({type:g}),function(e,t){return new Promise(function(){var n=Object(ce.a)(ie.a.mark(function n(r,a){return ie.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",fetch(ue.a.api_url+"/users/login",{method:"POST",body:JSON.stringify({username:e,password:t})}).then(function(e){return e.json()}).then(function(e){if(0===e.status)return a(e.error.message);var t=e.result.token;he(t),r(t)}).catch(function(e){return a(e)}));case 1:case"end":return n.stop()}},n,this)}));return function(e,t){return n.apply(this,arguments)}}())}(e,t).then(function(e){n({type:j})}).catch(function(e){return n(function(e){return{type:E,err:e}}(e))})}}function Ee(e,t,n,r){return function(a){a({type:O}),fe(e,t,n,r).then(function(e){a({type:y})}).catch(function(e){return a(function(e){return{type:S,err:e}}(e))})}}var ve=n(39),Ce=n.n(ve),Oe=n(33),ye=n.n(Oe),Se=n(24),we=n.n(Se),_e=n(25),ke=n.n(_e),Le=n(133),De=n.n(Le),Pe=n(137),Re=n.n(Pe),Te=n(135),Ue=n.n(Te),Ae=n(136),Ie=n.n(Ae),Ne=n(134),xe=n.n(Ne),Me=n(90),Fe=n.n(Me);function Je(e){return a.a.createElement(Fe.a,Object.assign({direction:"up"},e))}var We=function(e){function t(){var e,n;Object(c.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(a)))).state={open:!0},n.handleClose=function(){n.setState({open:!1}),n.props.onClose&&n.props.onClose()},n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return a.a.createElement(De.a,{open:this.state.open,TransitionComponent:Je,onClose:this.handleClose,"aria-labelledby":"alert-dialog-slide-title","aria-describedby":"alert-dialog-slide-description"},a.a.createElement(xe.a,{id:"alert-dialog-slide-title"},this.props.title),a.a.createElement(Ue.a,null,a.a.createElement(Ie.a,{id:"alert-dialog-slide-description"},this.props.children)),a.a.createElement(Re.a,null,a.a.createElement(ke.a,{onClick:this.handleClose,color:"primary"},"Close")))}}]),t}(r.Component),He={container:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh",backgroundColor:"#E1E6E9"},paper:{width:330,padding:"20px"},btnSignIn:{width:"100%",margin:"10px 0"},hr:{backgroundColor:"#e0e0e0",height:1,border:0},textRight:{textAlign:"right"}},Be=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(l.a)(t).call(this,e))).state={tab:1,username:"",phone:"",password:"",password1:"",password2:"",full_name:""},n.onClickLogin=n.onClickLogin.bind(Object(ge.a)(Object(ge.a)(n))),n.onClickSignup=n.onClickSignup.bind(Object(ge.a)(Object(ge.a)(n))),n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"onClickLogin",value:function(){var e=this.state,t=e.username,n=e.password;return t?n?void this.props.login(t,n):alert("please fill your password"):alert("please fill your username")}},{key:"onClickSignup",value:function(){var e=this.state,t=e.username,n=e.password1,r=e.password2,a=e.full_name,o=e.phone;return t?n!==r?alert("password not match"):n?o?void this.props.signup(t,n,a,o):alert("please fill your phone"):alert("please fill your password"):alert("please fill your username")}},{key:"render",value:function(){var e=this;return this.props.signupData.signupSuccessfull&&2===this.state.tab&&this.setState({tab:1}),this.props.loginData.loginSuccessfull&&this.props.history.push("/app"),a.a.createElement("div",{style:He.container},1===this.state.tab&&a.a.createElement(Ce.a,{elevation:1,style:He.paper},a.a.createElement(ye.a,{variant:"h5",component:"h3",align:"center"},"Sign in"),a.a.createElement(we.a,{id:"username",label:"Your username",value:this.state.username,onChange:function(t){return e.setState({username:t.target.value})},margin:"normal",fullWidth:!0}),a.a.createElement(we.a,{id:"password",label:"Your password",type:"password",value:this.state.password,onChange:function(t){return e.setState({password:t.target.value})},margin:"normal",fullWidth:!0}),a.a.createElement(ye.a,{variant:"body1",component:"p",align:"right",color:"primary"},"Forgot Password?"),a.a.createElement(ke.a,{variant:"contained",color:"primary",style:He.btnSignIn,disabled:this.props.loginData.startLogin&&!this.props.loginData.loginSuccessfull,onClick:this.onClickLogin},"Sign in"),a.a.createElement("hr",{style:He.hr}),a.a.createElement("div",{style:He.textRight},a.a.createElement(ye.a,{variant:"body1",component:"span",align:"right",style:{display:"inline-block"}},"Not a member?"),a.a.createElement(ye.a,{variant:"body1",component:"span",align:"right",color:"primary",style:{display:"inline-block",cursor:"pointer"},onClick:function(){return e.setState({tab:2})}},"Sign Up"))),2===this.state.tab&&a.a.createElement(Ce.a,{elevation:1,style:He.paper},a.a.createElement(ye.a,{variant:"h5",component:"h3",align:"center"},"Sign up"),a.a.createElement(we.a,{id:"full_name",label:"Your full name",value:this.state.full_name,onChange:function(t){return e.setState({full_name:t.target.value})},margin:"normal",fullWidth:!0}),a.a.createElement(we.a,{id:"phone",label:"Your phone",value:this.state.phone,onChange:function(t){return e.setState({phone:t.target.value})},margin:"normal",fullWidth:!0}),a.a.createElement(we.a,{id:"username",label:"Your username",value:this.state.username,onChange:function(t){return e.setState({username:t.target.value})},margin:"normal",fullWidth:!0}),a.a.createElement(we.a,{id:"password1",label:"Your password",type:"password",value:this.state.password1,onChange:function(t){return e.setState({password1:t.target.value})},margin:"normal",fullWidth:!0}),a.a.createElement(we.a,{id:"password2",label:"Retype your password",type:"password",value:this.state.password2,onChange:function(t){return e.setState({password2:t.target.value})},margin:"normal",fullWidth:!0}),a.a.createElement(ke.a,{variant:"contained",color:"primary",style:He.btnSignIn,disabled:this.props.signupData.startSignup&&!this.props.signupData.signupSuccessfull,onClick:this.onClickSignup},"Sign up"),a.a.createElement("hr",{style:He.hr}),a.a.createElement("div",{style:He.textRight},a.a.createElement(ye.a,{variant:"body1",component:"span",align:"right",style:{display:"inline-block"}},"Have an account?"),a.a.createElement(ye.a,{variant:"body1",component:"span",align:"right",color:"primary",style:{display:"inline-block",cursor:"pointer"},onClick:function(){return e.setState({tab:1})}},"Sign In"))),!!this.props.loginData.error&&a.a.createElement(We,{title:"Error",onClose:this.props.handeErrorLogin},this.props.loginData.error),!!this.props.signupData.error&&a.a.createElement(We,{title:"Error",onClose:this.props.handeErrorSignup},this.props.signupData.error))}}]),t}(r.Component),Ge=Object(m.b)(function(e){return{loginData:e.loginData,signupData:e.signupData}},function(e){return{login:function(t,n){return e(je(t,n))},signup:function(t,n,r){return e(Ee(t,n,r))},handeErrorLogin:function(){return e({type:v})},handeErrorSignup:function(){return e({type:w})}}})(Be),Ye=n(329),Qe=n(32),ze=n(141),Xe=n.n(ze),$e=n(138),qe=n.n($e),Ke=n(53),Ve=n.n(Ke),Ze=n(74),et=n.n(Ze),tt=n(139),nt=n.n(tt),rt=n(46),at=n.n(rt),ot=n(95),it=n.n(ot),ct=n(40),st=n.n(ct),ut=n(48),lt=n.n(ut),pt=n(142),mt=n.n(pt),ht=n(144),ft=n.n(ht),dt=n(143),bt=n.n(dt),gt=n(140),jt=n.n(gt),Et=n(73),vt=n.n(Et),Ct=n(145),Ot=n.n(Ct);function yt(e){return{type:D,error:e}}function St(){return function(e){e({type:k}),new Promise(function(){var e=Object(ce.a)(ie.a.mark(function e(t,n){return ie.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(ue.a.api_url+"/users/projects/create",{headers:le()}).then(function(e){return e.json()}).then(function(e){if(0===e.status)return n(e.error.message);t(e.result)}).catch(function(e){return n(e)}));case 1:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()).then(function(t){e(function(e){return{type:L,projects:e}}(t))}).catch(function(t){return e(yt(t))})}}function wt(e){return function(t){(function(e){return new Promise(function(){var t=Object(ce.a)(ie.a.mark(function t(n,r){return ie.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",fetch(ue.a.api_url+"/projects",{method:"POST",headers:le(),body:JSON.stringify({project:{name:e}})}).then(function(e){return e.json()}).then(function(e){if(0===e.status)return r(e.error.message);n(e.result)}).catch(function(e){return r(e)}));case 1:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}())})(e).then(function(e){t(function(e){return{type:R,projects:[e]}}(e))}).catch(function(e){return t(yt(e))})}}function _t(e){return function(t){(function(e){return new Promise(function(){var t=Object(ce.a)(ie.a.mark(function t(n,r){return ie.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",fetch(ue.a.api_url+"/projects/"+e,{method:"DELETE",headers:le()}).then(function(e){return e.json()}).then(function(e){if(0===e.status)return r(e.error.message);n(e.result)}).catch(function(e){return r(e)}));case 1:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}())})(e).then(function(){t(function(e){return{type:T,projectID:e}}(e))}).catch(function(e){return t(yt(e))})}}function kt(e){return function(t){(function(e){return new Promise(function(){var t=Object(ce.a)(ie.a.mark(function t(n,r){return ie.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",fetch(ue.a.api_url+"/projects/"+e._id,{method:"PUT",headers:le(),body:JSON.stringify({project:{name:e.name}})}).then(function(e){return e.json()}).then(function(e){if(0===e.status)return r(e.error.message);n(e.result)}).catch(function(e){return r(e)}));case 1:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}())})(e).then(function(){t(function(e){return{type:U,project:e}}(e))}).catch(function(e){return t(yt(e))})}}function Lt(){return function(e){e({type:I}),new Promise(function(){var e=Object(ce.a)(ie.a.mark(function e(t,n){return ie.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(ue.a.api_url+"/users/projects/assign",{headers:le()}).then(function(e){return e.json()}).then(function(e){if(0===e.status)return n(e.error.message);t(e.result)}).catch(function(e){return n(e)}));case 1:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()).then(function(t){e(function(e){return{type:N,projects:e}}(t))}).catch(function(t){return e({type:x,error:t})})}}var Dt=n(70),Pt=n.n(Dt),Rt=n(72),Tt=n.n(Rt),Ut=n(17),At=n.n(Ut),It=n(71),Nt=n.n(It),xt=n(45),Mt=n.n(xt);function Ft(){return function(e){e({type:J}),new Promise(function(){var e=Object(ce.a)(ie.a.mark(function e(t,n){return ie.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(ue.a.api_url+"/users",{headers:le()}).then(function(e){return e.json()}).then(function(e){if(0===e.status)return n(e.error.message);t(e.result)}).catch(function(e){return n(e)}));case 1:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()).then(function(t){e(function(e){return{type:W,users:e}}(t))}).catch(function(t){return e({type:H,error:t})})}}var Jt=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(l.a)(t).call(this,e))).props.getListUsers(),n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.memberData;return a.a.createElement("div",{className:t.root},a.a.createElement(Pt.a,{className:t.table},a.a.createElement(Nt.a,null,a.a.createElement(Mt.a,null,a.a.createElement(At.a,null,"#"),a.a.createElement(At.a,null,"Full name"),a.a.createElement(At.a,null,"Username"),a.a.createElement(At.a,null,"Date created"))),a.a.createElement(Tt.a,null,n.users.map(function(e,t){return a.a.createElement(Mt.a,null,a.a.createElement(At.a,{component:"th",scope:"row"},t),a.a.createElement(At.a,null,e.full_name),a.a.createElement(At.a,null,e.username),a.a.createElement(At.a,null,e.date_created))}))))}}]),t}(r.Component),Wt=Object(m.b)(function(e){return{memberData:e.memberData}},function(e){return{getListUsers:function(){return e(Ft())}}})(Object(Qe.withStyles)(function(e){return{root:{width:"100%",marginTop:3*e.spacing.unit,overflowX:"auto"},table:{minWidth:700}}})(Jt)),Ht=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(l.a)(t).call(this,e))).state={username:"",password:"",full_name:"",phone:"",is_loading:!1},n.onClickCreateUser=n.onClickCreateUser.bind(Object(ge.a)(Object(ge.a)(n))),n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"onClickCreateUser",value:function(){var e=this;this.setState({is_loading:!0});var t=this.state,n=t.username,r=t.password,a=t.full_name,o=t.phone;return n?r?a?o?void fe(n,r,a,o).then(function(){e.setState({is_loading:!1,username:"",password:"",full_name:"",phone:""})}).catch(function(t){e.setState({is_loading:!1}),alert(t.message||t)}):alert("please fill phone"):alert("please fill full name"):alert("please fill password"):alert("please fill username")}},{key:"render",value:function(){var e=this,t=this.props.classes;return a.a.createElement("div",null,a.a.createElement(we.a,{id:"username",label:"Your username",value:this.state.username,onChange:function(t){return e.setState({username:t.target.value})},margin:"normal",fullWidth:!0}),a.a.createElement(we.a,{id:"password",label:"Your password",type:"password",value:this.state.password,onChange:function(t){return e.setState({password:t.target.value})},margin:"normal",fullWidth:!0}),a.a.createElement(we.a,{id:"full_name",label:"Your full name",value:this.state.full_name,onChange:function(t){return e.setState({full_name:t.target.value})},margin:"normal",fullWidth:!0}),a.a.createElement(we.a,{id:"phone",label:"Your phone",value:this.state.phone,onChange:function(t){return e.setState({phone:t.target.value})},margin:"normal",fullWidth:!0}),a.a.createElement(ke.a,{variant:"contained",color:"primary",classes:t.btnCreateUser,disabled:this.state.is_loading,onClick:this.onClickCreateUser},"Sign up"))}}]),t}(r.Component),Bt=Object(m.b)(function(e){return{}},function(e){return{}})(Object(Qe.withStyles)(function(e){return{btnCreateUser:{}}})(Ht)),Gt=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(l.a)(t).call(this,e))).state={name:""},n.onClickCreateProject=n.onClickCreateProject.bind(Object(ge.a)(Object(ge.a)(n))),n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"onClickCreateProject",value:function(){if(!this.state.name)return alert("please fill project's name");this.props.createProject(this.state.name),this.setState({name:""})}},{key:"render",value:function(){var e=this;this.props.classes;return a.a.createElement("div",null,a.a.createElement(we.a,{id:"name",label:"Project's name",value:this.state.name,onChange:function(t){return e.setState({name:t.target.value})},margin:"normal",fullWidth:!0}),a.a.createElement(ke.a,{variant:"contained",color:"primary",disabled:this.props.projectCreatedData.isLoading,onClick:this.onClickCreateProject},"Create"))}}]),t}(r.Component),Yt=Object(m.b)(function(e){return{projectCreatedData:e.projectCreatedData}},function(e){return{createProject:function(t){return e(wt(t))}}})(Object(Qe.withStyles)(function(e){return{}})(Gt)),Qt=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(l.a)(t).call(this,e))).state={name:""},n.onClickUpdateProject=n.onClickUpdateProject.bind(Object(ge.a)(Object(ge.a)(n))),n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentWillReceiveProps",value:function(e){var t=e.match,n=e.projectCreatedData.projects.find(function(e){return e._id===t.params.id});n&&(this.project=n,this.setState({name:n.name}))}},{key:"onClickUpdateProject",value:function(){if(!this.state.name)return alert("please fill project's name");this.project&&(this.project.name=this.state.name,this.props.updateProject(this.project))}},{key:"render",value:function(){var e=this;this.props.classes;return a.a.createElement("div",null,a.a.createElement(we.a,{id:"name",label:"Project's name",value:this.state.name,onChange:function(t){return e.setState({name:t.target.value})},margin:"normal",fullWidth:!0}),a.a.createElement(ke.a,{variant:"contained",color:"primary",disabled:this.props.projectCreatedData.isLoading,onClick:this.onClickUpdateProject},"Update"))}}]),t}(r.Component),zt=Object(m.b)(function(e){return{projectCreatedData:e.projectCreatedData}},function(e){return{updateProject:function(t){return e(kt(t))}}})(Object(Qe.withStyles)(function(e){return{}})(Qt)),Xt=n(91),$t=n.n(Xt),qt=n(94),Kt=n.n(qt),Vt=n(92),Zt=n.n(Vt),en=n(93),tn=n.n(en);function nn(e){return{type:z,error:e}}function rn(e){return function(t){t({type:Y}),function(e){return new Promise(function(){var t=Object(ce.a)(ie.a.mark(function t(n,r){return ie.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",fetch(ue.a.api_url+"/projects/"+e+"/members",{headers:le()}).then(function(e){return e.json()}).then(function(e){if(0===e.status)return r(e.error.message);n(e.result)}).catch(function(e){return r(e)}));case 1:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}())}(e).then(function(e){t(function(e){return{type:Q,members:e}}(e))}).catch(function(e){return t(nn(e))})}}function an(e,t){return function(n){(function(e,t){return new Promise(function(){var n=Object(ce.a)(ie.a.mark(function n(r,a){return ie.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",fetch(ue.a.api_url+"/projects/"+e+"/assign",{method:"POST",headers:le(),body:JSON.stringify({users:[t]})}).then(function(e){return e.json()}).then(function(e){if(0===e.status)return a(e.error.message);r(e.result)}).catch(function(e){return a(e)}));case 1:case"end":return n.stop()}},n,this)}));return function(e,t){return n.apply(this,arguments)}}())})(e,t).then(function(){return e=t,new Promise(function(){var t=Object(ce.a)(ie.a.mark(function t(n,r){return ie.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",fetch(ue.a.api_url+"/users/"+e,{headers:le()}).then(function(e){return e.json()}).then(function(e){if(0===e.status)return r(e.error.message);n(e.result)}).catch(function(e){return r(e)}));case 1:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}());var e}).then(function(e){n(function(e){return{type:$,member:e}}(e))}).catch(function(e){return n(nn(e))})}}function on(e,t){return function(n){(function(e,t){return new Promise(function(){var n=Object(ce.a)(ie.a.mark(function n(r,a){return ie.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",fetch(ue.a.api_url+"/projects/"+e+"/assign",{method:"DELETE",headers:le(),body:JSON.stringify({users:[t]})}).then(function(e){return e.json()}).then(function(e){if(0===e.status)return a(e.error.message);r(e.result)}).catch(function(e){return a(e)}));case 1:case"end":return n.stop()}},n,this)}));return function(e,t){return n.apply(this,arguments)}}())})(e,t).then(function(){n(function(e){return{type:q,memberID:e}}(t))}).catch(function(e){return n(nn(e))})}}var cn=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(l.a)(t).call(this,e))).state={memberToAssign:0},n.onClickAssignMember=n.onClickAssignMember.bind(Object(ge.a)(Object(ge.a)(n))),n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentWillReceiveProps",value:function(e){var t=e.match;this.projectID!==t.params.id&&(this.projectID=t.params.id,this.props.getProjectMember(this.projectID))}},{key:"onClickAssignMember",value:function(){var e=this.props.memberData.users[this.state.memberToAssign];this.props.assignMember(this.projectID,e._id)}},{key:"render",value:function(){var e=this,t=this.props.classes;return a.a.createElement("div",{className:t.root},a.a.createElement(Zt.a,{className:t.formControl},a.a.createElement($t.a,{htmlFor:"members-to-assign"},"Members"),a.a.createElement(tn.a,{value:this.state.memberToAssign,onChange:function(t){return e.setState({memberToAssign:t.target.value})},inputProps:{name:"members-to-assign",id:"members-to-assign"}},this.props.memberData.users.map(function(e,t){return a.a.createElement(Kt.a,{value:t},e.full_name)}))),a.a.createElement(ke.a,{variant:"contained",color:"primary",disabled:this.props.projectMemberData.isLoading,onClick:this.onClickAssignMember},"Assign"),a.a.createElement(Pt.a,{className:t.table},a.a.createElement(Nt.a,null,a.a.createElement(Mt.a,null,a.a.createElement(At.a,null,"#"),a.a.createElement(At.a,null,"Full name"),a.a.createElement(At.a,null,"Username"),a.a.createElement(At.a,null,"Date created"),a.a.createElement(At.a,null,"Unassign"))),a.a.createElement(Tt.a,null,this.props.projectMemberData.members.map(function(t,n){return a.a.createElement(Mt.a,null,a.a.createElement(At.a,{component:"th",scope:"row"},n),a.a.createElement(At.a,null,t.full_name),a.a.createElement(At.a,null,t.username),a.a.createElement(At.a,null,t.date_created),a.a.createElement(At.a,null,a.a.createElement(at.a,{onClick:function(){return e.props.unassignMember(e.projectID,t._id)}},a.a.createElement(vt.a,null))))}))))}}]),t}(r.Component),sn=Object(m.b)(function(e){return{memberData:e.memberData,projectMemberData:e.projectMemberData}},function(e){return{getProjectMember:function(t){return e(rn(t))},assignMember:function(t,n){return e(an(t,n))},unassignMember:function(t,n){return e(on(t,n))}}})(Object(Qe.withStyles)(function(e){return{root:{width:"100%",marginTop:3*e.spacing.unit,overflowX:"auto"},table:{minWidth:700},formControl:{margin:e.spacing.unit,minWidth:120}}})(cn)),un=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(l.a)(t).call(this,e))).onClickSignout=n.onClickSignout.bind(Object(ge.a)(Object(ge.a)(n))),n.onClickDeleteProject=n.onClickDeleteProject.bind(Object(ge.a)(Object(ge.a)(n))),n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.props.getProjectCreated(),this.props.getProjectAssign()}},{key:"onClickSignout",value:function(){he(),this.props.history.replace("/")}},{key:"onClickDeleteProject",value:function(e){1==window.confirm('Delete project"'+e.name+'"')&&this.props.deleteProject(e._id)}},{key:"render",value:function(){var e=this,t=this.props.classes;return a.a.createElement("div",{className:t.root},a.a.createElement(qe.a,{position:"fixed",className:t.appBar},a.a.createElement(nt.a,null,a.a.createElement(at.a,{color:"inherit","aria-label":"Menu",className:t.appBarMenuButton},a.a.createElement(jt.a,null)),a.a.createElement(ye.a,{variant:"h6",color:"inherit",className:t.appBarTitle},"Team Manage"),a.a.createElement(ke.a,{color:"inherit",onClick:this.onClickSignout},"Sign out"))),a.a.createElement(Xe.a,{className:t.drawer,variant:"permanent"},a.a.createElement("div",{className:t.toolbar}),a.a.createElement(Ve.a,{component:"nav",subheader:a.a.createElement(et.a,{component:"div"},"Members")},a.a.createElement(st.a,{button:!0,onClick:function(){return e.props.history.push("/app/members")}},a.a.createElement(lt.a,{primary:"Members"})),a.a.createElement(st.a,{button:!0,onClick:function(){return e.props.history.push("/app/members/create")}},a.a.createElement(lt.a,{primary:"Add a member"}))),a.a.createElement(it.a,null),a.a.createElement(Ve.a,{component:"nav",subheader:a.a.createElement(et.a,{component:"div"},"Projects you create")},a.a.createElement(st.a,{button:!0,onClick:function(){return e.props.history.push("/app/projects/create")}},a.a.createElement(mt.a,null,a.a.createElement(bt.a,null)),a.a.createElement(lt.a,{primary:"Create new project"})),this.props.projectCreatedData.projects.map(function(t){return a.a.createElement(st.a,{button:!0,key:t.name,onClick:function(){return e.props.history.push("/app/projects/"+t._id+"/members")}},a.a.createElement(lt.a,{primary:t.name||"Unnamed"}),a.a.createElement(ft.a,null,a.a.createElement(at.a,{onClick:function(){return e.props.history.push("/app/projects/"+t._id+"/update")}},a.a.createElement(Ot.a,null)),a.a.createElement(at.a,{onClick:function(){return e.onClickDeleteProject(t)}},a.a.createElement(vt.a,null))))})),a.a.createElement(it.a,null),a.a.createElement(Ve.a,{component:"nav",subheader:a.a.createElement(et.a,{component:"div"},"Projects you assigned")},this.props.projectAssignData.projects.map(function(e){return a.a.createElement(st.a,{button:!0,key:e.name},a.a.createElement(lt.a,{primary:e.name}))}))),a.a.createElement("main",{className:t.content},a.a.createElement("div",{className:t.toolbar}),a.a.createElement(Ye.a,null,a.a.createElement(ne.a,{exact:!0,path:"/app",component:Wt}),a.a.createElement(ne.a,{exact:!0,path:"/app/members",component:Wt}),a.a.createElement(ne.a,{exact:!0,path:"/app/members/create",component:Bt}),a.a.createElement(ne.a,{exact:!0,path:"/app/projects/create",component:Yt}),a.a.createElement(ne.a,{exact:!0,path:"/app/projects/:id/update",component:zt}),a.a.createElement(ne.a,{exact:!0,path:"/app/projects/:id/members",component:sn}))))}}]),t}(r.Component),ln=Object(m.b)(function(e){return{projectCreatedData:e.projectCreatedData,projectAssignData:e.projectAssignData}},function(e){return{handeErrorProjectCreated:function(){return e({type:P})},getProjectCreated:function(){return e(St())},deleteProject:function(t){return e(_t(t))},handeErrorProjectAssign:function(){return e({type:M})},getProjectAssign:function(){return e(Lt())}}})(Object(Qe.withStyles)(function(e){return{root:{display:"flex"},appBar:{zIndex:e.zIndex.drawer+1},appBarTitle:{flexGrow:1},appBarMenuButton:{marginLeft:-12,marginRight:20},drawer:{width:240,flexShrink:0},toolbar:e.mixins.toolbar,content:{flexGrow:1,padding:3*e.spacing.unit}}})(un)),pn=function(){return a.a.createElement(te.a,null,a.a.createElement("div",null,a.a.createElement(ne.a,{exact:!0,path:"/",component:Ge}),a.a.createElement(be,{path:"/app",component:ln})))},mn=(n(322),function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return a.a.createElement(m.a,{store:ee},a.a.createElement(pn,null))}}]),t}(r.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(a.a.createElement(mn,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[147,2,1]]]);
//# sourceMappingURL=main.9f175144.chunk.js.map