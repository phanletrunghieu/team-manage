(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{149:function(e,t,n){e.exports=n(328)},154:function(e,t,n){},30:function(e,t){e.exports={api_url:"/api"}},326:function(e,t,n){},328:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(31),c=n.n(o),i=(n(154),n(18)),s=n(19),u=n(21),l=n(20),p=n(22),m=n(26),f=n(37),h=n(131),d=n(132),b=n(7),g="START_LOGIN",j="LOGIN_SUCCESSFULL",E="LOGIN_FAIL",v="LOGIN_HANDLE_ERROR",C={startLogin:!1,loginSuccessfull:!1,error:null},O="START_SIGNUP",y="SIGNUP_SUCCESSFULL",S="SIGNUP_FAIL",_="SIGNUP_HANDLE_ERROR",w={startSignup:!1,signupSuccessfull:!1,error:null},k="REQUEST_PROJECT_CREATED",D="PROJECT_CREATED_FETCH_SUCCESSFULL",L="PROJECT_CREATED_FETCH_FAIL",P="PROJECT_CREATED_HANDLE_ERROR",R="PROJECT_CREATED_CREATE_SUCCESSFULL",T="PROJECT_CREATED_DELETE_SUCCESSFULL",A="PROJECT_CREATED_UPDATE_SUCCESSFULL",U={isLoading:!1,projects:[],error:null},I=n(147),N="REQUEST_PROJECT_ASSIGN",x="PROJECT_ASSIGN_FETCH_SUCCESSFULL",M="PROJECT_ASSIGN_FETCH_FAIL",F="PROJECT_ASSIGN_HANDLE_ERROR",J="PROJECT_ASSIGN_ADD",W="PROJECT_ASSIGN_REMOVE",G={isLoading:!1,projects:[],error:null},H="REQUEST_LIST_USER",B="LIST_USER_FETCH_SUCCESSFULL",Y="LIST_USER_FETCH_FAIL",Q="LIST_USER_HANDLE_ERROR",z={isLoading:!1,users:[],error:null},X="REQUEST_PROJECT_MEMBER",V="PROJECT_MEMBER_FETCH_SUCCESSFULL",$="PROJECT_MEMBER_FETCH_FAIL",q="PROJECT_MEMBER_HANDLE_ERROR",K="PROJECT_MEMBER_ASSIGN",Z="PROJECT_MEMBER_UNASSIGN",ee={isLoading:!1,members:[],error:null},te=Object(f.c)({loginData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g:return Object(b.a)({},e,{startLogin:!0});case j:return Object(b.a)({},e,{startLogin:!1,loginSuccessfull:!0});case E:return Object(b.a)({},e,{startLogin:!1,error:t.err});case v:return Object(b.a)({},e,{error:null});default:return e}},signupData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case O:return Object(b.a)({},e,{startSignup:!0});case y:return Object(b.a)({},e,{startSignup:!1,signupSuccessfull:!0});case S:return Object(b.a)({},e,{startSignup:!1,error:t.err});case _:return Object(b.a)({},e,{error:null});default:return e}},projectCreatedData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case k:return Object(b.a)({},e,{isLoading:!0});case D:return Object(b.a)({},e,{isLoading:!1,projects:t.projects});case L:return Object(b.a)({},e,{isLoading:!1,error:t.error});case P:return Object(b.a)({},e,{isLoading:!1,error:null});case R:return Object(b.a)({},e,{isLoading:!1,projects:e.projects.concat(t.projects)});case T:return Object(b.a)({},e,{isLoading:!1,projects:e.projects.filter(function(e){return e._id!==t.projectID})});case A:return Object(b.a)({},e,{isLoading:!1,projects:e.projects.map(function(e){return e._id===t.project._id?Object.assign(e,t.project):e})});default:return e}},projectAssignData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case N:return Object(b.a)({},e,{isLoading:!0});case x:return Object(b.a)({},e,{isLoading:!1,projects:t.projects});case M:return Object(b.a)({},e,{isLoading:!1,error:t.error});case F:return Object(b.a)({},e,{error:null});case J:return Object(b.a)({},e,{projects:Object(I.a)(e.projects).concat([t.project])});case W:return Object(b.a)({},e,{projects:e.projects.filter(function(e){return e._id!==t._id})});default:return e}},memberData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case H:return Object(b.a)({},e,{isLoading:!0});case B:return Object(b.a)({},e,{isLoading:!1,users:t.users});case Y:return Object(b.a)({},e,{isLoading:!1,error:t.error});case Q:return Object(b.a)({},e,{error:null});default:return e}},projectMemberData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ee,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case X:return Object(b.a)({},e,{isLoading:!0});case V:return Object(b.a)({},e,{isLoading:!1,members:t.members});case $:return Object(b.a)({},e,{isLoading:!1,error:t.error});case q:return Object(b.a)({},e,{error:null});case K:return Object(b.a)({},e,{members:e.members.concat([t.member])});case Z:return Object(b.a)({},e,{members:e.members.filter(function(e){return e._id!==t.memberID})});default:return e}}}),ne=Object(h.createLogger)({timestamps:!0,duration:!0}),re=Object(f.e)(te,Object(f.d)(Object(f.a)(ne,d.a))),ae=n(331),oe=n(333),ce=n(148),ie=n(330),se=n(10),ue=n.n(se),le=n(29),pe=n(30),me=n.n(pe);function fe(e){var t=new Headers({"Content-Type":"application/json; charset=utf-8",Accept:"application/json"});return(e=e||ge())&&t.append("x-access-token",e),t}var he=n(133),de=n.n(he),be="token";function ge(){return sessionStorage.getItem(be)}function je(e){sessionStorage.setItem(be,e)}function Ee(e,t,n,r){return new Promise(function(){var a=Object(le.a)(ue.a.mark(function a(o,c){return ue.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",fetch(me.a.api_url+"/users",{method:"POST",body:JSON.stringify({user:{username:e,password:t,full_name:n,phone:r}})}).then(function(e){return e.json()}).then(function(e){if(0===e.status)return c(e.error.message);o(e.result)}).catch(function(e){return c(e)}));case 1:case"end":return a.stop()}},a,this)}));return function(e,t){return a.apply(this,arguments)}}())}function ve(){return!!ge()}function Ce(){var e=sessionStorage.getItem(be);return de()(e)}var Oe=function(e){var t=e.component,n=Object(ce.a)(e,["component"]);return a.a.createElement(oe.a,Object.assign({},n,{render:function(e){return ve()?a.a.createElement(t,e):a.a.createElement(ie.a,{to:{pathname:"/",state:{from:e.location}}})}}))},ye=n(16);function Se(e,t){return function(n){n({type:g}),function(e,t){return new Promise(function(){var n=Object(le.a)(ue.a.mark(function n(r,a){return ue.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",fetch(me.a.api_url+"/users/login",{method:"POST",body:JSON.stringify({username:e,password:t})}).then(function(e){return e.json()}).then(function(e){if(0===e.status)return a(e.error.message);var t=e.result.token;je(t),r(t)}).catch(function(e){return a(e)}));case 1:case"end":return n.stop()}},n,this)}));return function(e,t){return n.apply(this,arguments)}}())}(e,t).then(function(e){n({type:j})}).catch(function(e){return n(function(e){return{type:E,err:e}}(e))})}}function _e(e,t,n,r){return function(a){a({type:O}),Ee(e,t,n,r).then(function(e){a({type:y})}).catch(function(e){return a(function(e){return{type:S,err:e}}(e))})}}var we=n(39),ke=n.n(we),De=n(33),Le=n.n(De),Pe=n(24),Re=n.n(Pe),Te=n(25),Ae=n.n(Te),Ue=n(134),Ie=n.n(Ue),Ne=n(138),xe=n.n(Ne),Me=n(136),Fe=n.n(Me),Je=n(137),We=n.n(Je),Ge=n(135),He=n.n(Ge),Be=n(90),Ye=n.n(Be);function Qe(e){return a.a.createElement(Ye.a,Object.assign({direction:"up"},e))}var ze=function(e){function t(){var e,n;Object(i.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(a)))).state={open:!0},n.handleClose=function(){n.setState({open:!1}),n.props.onClose&&n.props.onClose()},n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return a.a.createElement(Ie.a,{open:this.state.open,TransitionComponent:Qe,onClose:this.handleClose,"aria-labelledby":"alert-dialog-slide-title","aria-describedby":"alert-dialog-slide-description"},a.a.createElement(He.a,{id:"alert-dialog-slide-title"},this.props.title),a.a.createElement(Fe.a,null,a.a.createElement(We.a,{id:"alert-dialog-slide-description"},this.props.children)),a.a.createElement(xe.a,null,a.a.createElement(Ae.a,{onClick:this.handleClose,color:"primary"},"Close")))}}]),t}(r.Component),Xe={container:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh",backgroundColor:"#E1E6E9"},paper:{width:330,padding:"20px"},btnSignIn:{width:"100%",margin:"10px 0"},hr:{backgroundColor:"#e0e0e0",height:1,border:0},textRight:{textAlign:"right"}},Ve=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(u.a)(this,Object(l.a)(t).call(this,e))).state={tab:1,username:"",phone:"",password:"",password1:"",password2:"",full_name:""},n.onClickLogin=n.onClickLogin.bind(Object(ye.a)(Object(ye.a)(n))),n.onClickSignup=n.onClickSignup.bind(Object(ye.a)(Object(ye.a)(n))),n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"onClickLogin",value:function(){var e=this.state,t=e.username,n=e.password;return t?n?void this.props.login(t,n):alert("please fill your password"):alert("please fill your username")}},{key:"onClickSignup",value:function(){var e=this.state,t=e.username,n=e.password1,r=e.password2,a=e.full_name,o=e.phone;return t?n!==r?alert("password not match"):n?o?void this.props.signup(t,n,a,o):alert("please fill your phone"):alert("please fill your password"):alert("please fill your username")}},{key:"render",value:function(){var e=this;return this.props.signupData.signupSuccessfull&&2===this.state.tab&&this.setState({tab:1}),this.props.loginData.loginSuccessfull&&this.props.history.push("/app"),a.a.createElement("div",{style:Xe.container},1===this.state.tab&&a.a.createElement(ke.a,{elevation:1,style:Xe.paper},a.a.createElement(Le.a,{variant:"h5",component:"h3",align:"center"},"Sign in"),a.a.createElement(Re.a,{id:"username",label:"Your username",value:this.state.username,onChange:function(t){return e.setState({username:t.target.value})},margin:"normal",fullWidth:!0}),a.a.createElement(Re.a,{id:"password",label:"Your password",type:"password",value:this.state.password,onChange:function(t){return e.setState({password:t.target.value})},margin:"normal",fullWidth:!0}),a.a.createElement(Le.a,{variant:"body1",component:"p",align:"right",color:"primary"},"Forgot Password?"),a.a.createElement(Ae.a,{variant:"contained",color:"primary",style:Xe.btnSignIn,disabled:this.props.loginData.startLogin&&!this.props.loginData.loginSuccessfull,onClick:this.onClickLogin},"Sign in"),a.a.createElement("hr",{style:Xe.hr}),a.a.createElement("div",{style:Xe.textRight},a.a.createElement(Le.a,{variant:"body1",component:"span",align:"right",style:{display:"inline-block"}},"Not a member?"),a.a.createElement(Le.a,{variant:"body1",component:"span",align:"right",color:"primary",style:{display:"inline-block",cursor:"pointer"},onClick:function(){return e.setState({tab:2})}},"Sign Up"))),2===this.state.tab&&a.a.createElement(ke.a,{elevation:1,style:Xe.paper},a.a.createElement(Le.a,{variant:"h5",component:"h3",align:"center"},"Sign up"),a.a.createElement(Re.a,{id:"full_name",label:"Your full name",value:this.state.full_name,onChange:function(t){return e.setState({full_name:t.target.value})},margin:"normal",fullWidth:!0}),a.a.createElement(Re.a,{id:"phone",label:"Your phone",value:this.state.phone,onChange:function(t){return e.setState({phone:t.target.value})},margin:"normal",fullWidth:!0}),a.a.createElement(Re.a,{id:"username",label:"Your username",value:this.state.username,onChange:function(t){return e.setState({username:t.target.value})},margin:"normal",fullWidth:!0}),a.a.createElement(Re.a,{id:"password1",label:"Your password",type:"password",value:this.state.password1,onChange:function(t){return e.setState({password1:t.target.value})},margin:"normal",fullWidth:!0}),a.a.createElement(Re.a,{id:"password2",label:"Retype your password",type:"password",value:this.state.password2,onChange:function(t){return e.setState({password2:t.target.value})},margin:"normal",fullWidth:!0}),a.a.createElement(Ae.a,{variant:"contained",color:"primary",style:Xe.btnSignIn,disabled:this.props.signupData.startSignup&&!this.props.signupData.signupSuccessfull,onClick:this.onClickSignup},"Sign up"),a.a.createElement("hr",{style:Xe.hr}),a.a.createElement("div",{style:Xe.textRight},a.a.createElement(Le.a,{variant:"body1",component:"span",align:"right",style:{display:"inline-block"}},"Have an account?"),a.a.createElement(Le.a,{variant:"body1",component:"span",align:"right",color:"primary",style:{display:"inline-block",cursor:"pointer"},onClick:function(){return e.setState({tab:1})}},"Sign In"))),!!this.props.loginData.error&&a.a.createElement(ze,{title:"Error",onClose:this.props.handeErrorLogin},this.props.loginData.error),!!this.props.signupData.error&&a.a.createElement(ze,{title:"Error",onClose:this.props.handeErrorSignup},this.props.signupData.error))}}]),t}(r.Component),$e=Object(m.b)(function(e){return{loginData:e.loginData,signupData:e.signupData}},function(e){return{login:function(t,n){return e(Se(t,n))},signup:function(t,n,r){return e(_e(t,n,r))},handeErrorLogin:function(){return e({type:v})},handeErrorSignup:function(){return e({type:_})}}})(Ve),qe=n(332),Ke=n(32),Ze=n(142),et=n.n(Ze),tt=n(139),nt=n.n(tt),rt=n(53),at=n.n(rt),ot=n(74),ct=n.n(ot),it=n(140),st=n.n(it),ut=n(46),lt=n.n(ut),pt=n(95),mt=n.n(pt),ft=n(40),ht=n.n(ft),dt=n(48),bt=n.n(dt),gt=n(143),jt=n.n(gt),Et=n(145),vt=n.n(Et),Ct=n(144),Ot=n.n(Ct),yt=n(141),St=n.n(yt),_t=n(73),wt=n.n(_t),kt=n(146),Dt=n.n(kt);function Lt(e){return{type:L,error:e}}function Pt(){return function(e){e({type:k}),new Promise(function(){var e=Object(le.a)(ue.a.mark(function e(t,n){return ue.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(me.a.api_url+"/users/projects/create",{headers:fe()}).then(function(e){return e.json()}).then(function(e){if(0===e.status)return n(e.error.message);t(e.result)}).catch(function(e){return n(e)}));case 1:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()).then(function(t){e(function(e){return{type:D,projects:e}}(t))}).catch(function(t){return e(Lt(t))})}}function Rt(e){return function(t){(function(e){return new Promise(function(){var t=Object(le.a)(ue.a.mark(function t(n,r){return ue.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",fetch(me.a.api_url+"/projects",{method:"POST",headers:fe(),body:JSON.stringify({project:{name:e}})}).then(function(e){return e.json()}).then(function(e){if(0===e.status)return r(e.error.message);n(e.result)}).catch(function(e){return r(e)}));case 1:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}())})(e).then(function(e){t(function(e){return{type:R,projects:[e]}}(e))}).catch(function(e){return t(Lt(e))})}}function Tt(e){return function(t){(function(e){return new Promise(function(){var t=Object(le.a)(ue.a.mark(function t(n,r){return ue.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",fetch(me.a.api_url+"/projects/"+e,{method:"DELETE",headers:fe()}).then(function(e){return e.json()}).then(function(e){if(0===e.status)return r(e.error.message);n(e.result)}).catch(function(e){return r(e)}));case 1:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}())})(e).then(function(){t(function(e){return{type:T,projectID:e}}(e))}).catch(function(e){return t(Lt(e))})}}function At(e){return function(t){(function(e){return new Promise(function(){var t=Object(le.a)(ue.a.mark(function t(n,r){return ue.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",fetch(me.a.api_url+"/projects/"+e._id,{method:"PUT",headers:fe(),body:JSON.stringify({project:{name:e.name}})}).then(function(e){return e.json()}).then(function(e){if(0===e.status)return r(e.error.message);n(e.result)}).catch(function(e){return r(e)}));case 1:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}())})(e).then(function(){t(function(e){return{type:A,project:e}}(e))}).catch(function(e){return t(Lt(e))})}}function Ut(){return function(e){e({type:N}),new Promise(function(){var e=Object(le.a)(ue.a.mark(function e(t,n){return ue.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(me.a.api_url+"/users/projects/assign",{headers:fe()}).then(function(e){return e.json()}).then(function(e){if(0===e.status)return n(e.error.message);t(e.result)}).catch(function(e){return n(e)}));case 1:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()).then(function(t){e(function(e){return{type:x,projects:e}}(t))}).catch(function(t){return e({type:M,error:t})})}}var It=n(70),Nt=n.n(It),xt=n(72),Mt=n.n(xt),Ft=n(17),Jt=n.n(Ft),Wt=n(71),Gt=n.n(Wt),Ht=n(45),Bt=n.n(Ht);function Yt(){return function(e){e({type:H}),new Promise(function(){var e=Object(le.a)(ue.a.mark(function e(t,n){return ue.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(me.a.api_url+"/users",{headers:fe()}).then(function(e){return e.json()}).then(function(e){if(0===e.status)return n(e.error.message);t(e.result)}).catch(function(e){return n(e)}));case 1:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()).then(function(t){e(function(e){return{type:B,users:e}}(t))}).catch(function(t){return e({type:Y,error:t})})}}var Qt=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(u.a)(this,Object(l.a)(t).call(this,e))).props.getListUsers(),n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.memberData;return a.a.createElement("div",{className:t.root},a.a.createElement(Nt.a,{className:t.table},a.a.createElement(Gt.a,null,a.a.createElement(Bt.a,null,a.a.createElement(Jt.a,null,"#"),a.a.createElement(Jt.a,null,"Full name"),a.a.createElement(Jt.a,null,"Username"),a.a.createElement(Jt.a,null,"Date created"))),a.a.createElement(Mt.a,null,n.users.map(function(e,t){return a.a.createElement(Bt.a,null,a.a.createElement(Jt.a,{component:"th",scope:"row"},t),a.a.createElement(Jt.a,null,e.full_name),a.a.createElement(Jt.a,null,e.username),a.a.createElement(Jt.a,null,new Date(e.date_created).toDateString()))}))))}}]),t}(r.Component),zt=Object(m.b)(function(e){return{memberData:e.memberData}},function(e){return{getListUsers:function(){return e(Yt())}}})(Object(Ke.withStyles)(function(e){return{root:{width:"100%",marginTop:3*e.spacing.unit,overflowX:"auto"},table:{minWidth:700}}})(Qt)),Xt=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(u.a)(this,Object(l.a)(t).call(this,e))).state={username:"",password:"",full_name:"",phone:"",is_loading:!1},n.onClickCreateUser=n.onClickCreateUser.bind(Object(ye.a)(Object(ye.a)(n))),n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"onClickCreateUser",value:function(){var e=this;this.setState({is_loading:!0});var t=this.state,n=t.username,r=t.password,a=t.full_name,o=t.phone;return n?r?a?o?void Ee(n,r,a,o).then(function(){e.setState({is_loading:!1,username:"",password:"",full_name:"",phone:""})}).catch(function(t){e.setState({is_loading:!1}),alert(t.message||t)}):alert("please fill phone"):alert("please fill full name"):alert("please fill password"):alert("please fill username")}},{key:"render",value:function(){var e=this,t=this.props.classes;return a.a.createElement("div",null,a.a.createElement(Re.a,{id:"username",label:"Your username",value:this.state.username,onChange:function(t){return e.setState({username:t.target.value})},margin:"normal",fullWidth:!0}),a.a.createElement(Re.a,{id:"password",label:"Your password",type:"password",value:this.state.password,onChange:function(t){return e.setState({password:t.target.value})},margin:"normal",fullWidth:!0}),a.a.createElement(Re.a,{id:"full_name",label:"Your full name",value:this.state.full_name,onChange:function(t){return e.setState({full_name:t.target.value})},margin:"normal",fullWidth:!0}),a.a.createElement(Re.a,{id:"phone",label:"Your phone",value:this.state.phone,onChange:function(t){return e.setState({phone:t.target.value})},margin:"normal",fullWidth:!0}),a.a.createElement(Ae.a,{variant:"contained",color:"primary",classes:t.btnCreateUser,disabled:this.state.is_loading,onClick:this.onClickCreateUser},"Sign up"))}}]),t}(r.Component),Vt=Object(m.b)(function(e){return{}},function(e){return{}})(Object(Ke.withStyles)(function(e){return{btnCreateUser:{}}})(Xt)),$t=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(u.a)(this,Object(l.a)(t).call(this,e))).state={name:""},n.onClickCreateProject=n.onClickCreateProject.bind(Object(ye.a)(Object(ye.a)(n))),n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"onClickCreateProject",value:function(){if(!this.state.name)return alert("please fill project's name");this.props.createProject(this.state.name),this.setState({name:""})}},{key:"render",value:function(){var e=this;this.props.classes;return a.a.createElement("div",null,a.a.createElement(Re.a,{id:"name",label:"Project's name",value:this.state.name,onChange:function(t){return e.setState({name:t.target.value})},margin:"normal",fullWidth:!0}),a.a.createElement(Ae.a,{variant:"contained",color:"primary",disabled:this.props.projectCreatedData.isLoading,onClick:this.onClickCreateProject},"Create"))}}]),t}(r.Component),qt=Object(m.b)(function(e){return{projectCreatedData:e.projectCreatedData}},function(e){return{createProject:function(t){return e(Rt(t))}}})(Object(Ke.withStyles)(function(e){return{}})($t)),Kt=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(u.a)(this,Object(l.a)(t).call(this,e))).state={name:""},n.onClickUpdateProject=n.onClickUpdateProject.bind(Object(ye.a)(Object(ye.a)(n))),n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentWillReceiveProps",value:function(e){var t=e.match,n=e.projectCreatedData.projects.find(function(e){return e._id===t.params.id});n&&(this.project=n,this.setState({name:n.name}))}},{key:"onClickUpdateProject",value:function(){if(!this.state.name)return alert("please fill project's name");this.project&&(this.project.name=this.state.name,this.props.updateProject(this.project))}},{key:"render",value:function(){var e=this;this.props.classes;return a.a.createElement("div",null,a.a.createElement(Re.a,{id:"name",label:"Project's name",value:this.state.name,onChange:function(t){return e.setState({name:t.target.value})},margin:"normal",fullWidth:!0}),a.a.createElement(Ae.a,{variant:"contained",color:"primary",disabled:this.props.projectCreatedData.isLoading,onClick:this.onClickUpdateProject},"Update"))}}]),t}(r.Component),Zt=Object(m.b)(function(e){return{projectCreatedData:e.projectCreatedData}},function(e){return{updateProject:function(t){return e(At(t))}}})(Object(Ke.withStyles)(function(e){return{}})(Kt)),en=n(91),tn=n.n(en),nn=n(94),rn=n.n(nn),an=n(92),on=n.n(an),cn=n(93),sn=n.n(cn);function un(e){return{type:$,error:e}}function ln(e){return function(t){t({type:X}),function(e){return new Promise(function(){var t=Object(le.a)(ue.a.mark(function t(n,r){return ue.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",fetch(me.a.api_url+"/projects/"+e+"/members",{headers:fe()}).then(function(e){return e.json()}).then(function(e){if(0===e.status)return r(e.error.message);n(e.result)}).catch(function(e){return r(e)}));case 1:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}())}(e).then(function(e){t(function(e){return{type:V,members:e}}(e))}).catch(function(e){return t(un(e))})}}function pn(e,t){return function(n){(function(e,t){return new Promise(function(){var n=Object(le.a)(ue.a.mark(function n(r,a){return ue.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",fetch(me.a.api_url+"/projects/"+e+"/assign",{method:"POST",headers:fe(),body:JSON.stringify({users:[t]})}).then(function(e){return e.json()}).then(function(e){if(0===e.status)return a(e.error.message);r(e.result)}).catch(function(e){return a(e)}));case 1:case"end":return n.stop()}},n,this)}));return function(e,t){return n.apply(this,arguments)}}())})(e,t).then(function(){return e=t,new Promise(function(){var t=Object(le.a)(ue.a.mark(function t(n,r){return ue.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",fetch(me.a.api_url+"/users/"+e,{headers:fe()}).then(function(e){return e.json()}).then(function(e){if(0===e.status)return r(e.error.message);n(e.result)}).catch(function(e){return r(e)}));case 1:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}());var e}).then(function(e){n(function(e){return{type:K,member:e}}(e))}).catch(function(e){return n(un(e))})}}function mn(e,t){return function(n){(function(e,t){return new Promise(function(){var n=Object(le.a)(ue.a.mark(function n(r,a){return ue.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",fetch(me.a.api_url+"/projects/"+e+"/assign",{method:"DELETE",headers:fe(),body:JSON.stringify({users:[t]})}).then(function(e){return e.json()}).then(function(e){if(0===e.status)return a(e.error.message);r(e.result)}).catch(function(e){return a(e)}));case 1:case"end":return n.stop()}},n,this)}));return function(e,t){return n.apply(this,arguments)}}())})(e,t).then(function(){n(function(e){return{type:Z,memberID:e}}(t))}).catch(function(e){return n(un(e))})}}var fn=function(e){function t(){var e,n;Object(i.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(a)))).state={memberToAssign:0},n.onClickAssignMember=function(){var e=n.props.memberData.users[n.state.memberToAssign];if(n.props.assignMember(n.projectID,e._id),Ce()._id===e._id){var t=n.props.projectCreatedData.projects.find(function(e){return e._id===n.projectID});n.props.projectAssignAdd(t)}},n.onClickUnassignMember=function(e){n.props.unassignMember(n.projectID,e._id),Ce()._id===e._id&&n.props.projectAssignRemove(n.projectID)},n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentWillReceiveProps",value:function(e){var t=e.match;this.projectID!==t.params.id&&(this.projectID=t.params.id,this.props.getProjectMember(this.projectID))}},{key:"render",value:function(){var e=this,t=this.props.classes;return a.a.createElement("div",{className:t.root},a.a.createElement(on.a,{className:t.formControl},a.a.createElement(tn.a,{htmlFor:"members-to-assign"},"Members"),a.a.createElement(sn.a,{value:this.state.memberToAssign,onChange:function(t){return e.setState({memberToAssign:t.target.value})},inputProps:{name:"members-to-assign",id:"members-to-assign"}},this.props.memberData.users.map(function(e,t){return a.a.createElement(rn.a,{value:t},e.full_name)}))),a.a.createElement(Ae.a,{variant:"contained",color:"primary",disabled:this.props.projectMemberData.isLoading,onClick:this.onClickAssignMember},"Assign"),a.a.createElement(Nt.a,{className:t.table},a.a.createElement(Gt.a,null,a.a.createElement(Bt.a,null,a.a.createElement(Jt.a,null,"#"),a.a.createElement(Jt.a,null,"Full name"),a.a.createElement(Jt.a,null,"Username"),a.a.createElement(Jt.a,null,"Date created"),a.a.createElement(Jt.a,null,"Unassign"))),a.a.createElement(Mt.a,null,this.props.projectMemberData.members.map(function(t,n){return a.a.createElement(Bt.a,null,a.a.createElement(Jt.a,{component:"th",scope:"row"},n),a.a.createElement(Jt.a,null,t.full_name),a.a.createElement(Jt.a,null,t.username),a.a.createElement(Jt.a,null,new Date(t.date_created).toDateString()),a.a.createElement(Jt.a,null,a.a.createElement(lt.a,{onClick:function(){return e.onClickUnassignMember(t)}},a.a.createElement(wt.a,null))))}))))}}]),t}(r.Component),hn=Object(m.b)(function(e){return{memberData:e.memberData,projectMemberData:e.projectMemberData,projectCreatedData:e.projectCreatedData}},function(e){return{getProjectMember:function(t){return e(ln(t))},assignMember:function(t,n){return e(pn(t,n))},unassignMember:function(t,n){return e(mn(t,n))},projectAssignAdd:function(t){return e(function(e){return{type:J,project:e}}(t))},projectAssignRemove:function(t){return e({type:W,_id:t})}}})(Object(Ke.withStyles)(function(e){return{root:{width:"100%",marginTop:3*e.spacing.unit,overflowX:"auto"},table:{minWidth:700},formControl:{margin:e.spacing.unit,minWidth:120}}})(fn)),dn=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(u.a)(this,Object(l.a)(t).call(this,e))).onClickSignout=n.onClickSignout.bind(Object(ye.a)(Object(ye.a)(n))),n.onClickDeleteProject=n.onClickDeleteProject.bind(Object(ye.a)(Object(ye.a)(n))),n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.props.getProjectCreated(),this.props.getProjectAssign()}},{key:"onClickSignout",value:function(){sessionStorage.removeItem(be),window.location.reload()}},{key:"onClickDeleteProject",value:function(e){1==window.confirm('Delete project"'+e.name+'"')&&this.props.deleteProject(e._id)}},{key:"render",value:function(){var e=this,t=this.props.classes;return a.a.createElement("div",{className:t.root},a.a.createElement(nt.a,{position:"fixed",className:t.appBar},a.a.createElement(st.a,null,a.a.createElement(lt.a,{color:"inherit","aria-label":"Menu",className:t.appBarMenuButton},a.a.createElement(St.a,null)),a.a.createElement(Le.a,{variant:"h6",color:"inherit",className:t.appBarTitle},"Team Manage"),a.a.createElement(Ae.a,{color:"inherit",onClick:this.onClickSignout},"Sign out"))),a.a.createElement(et.a,{className:t.drawer,variant:"permanent"},a.a.createElement("div",{className:t.toolbar}),a.a.createElement(at.a,{component:"nav",subheader:a.a.createElement(ct.a,{component:"div"},"Members")},a.a.createElement(ht.a,{button:!0,onClick:function(){return e.props.history.push("/app/members")}},a.a.createElement(bt.a,{primary:"Members"})),a.a.createElement(ht.a,{button:!0,onClick:function(){return e.props.history.push("/app/members/create")}},a.a.createElement(bt.a,{primary:"Add a member"}))),a.a.createElement(mt.a,null),a.a.createElement(at.a,{component:"nav",subheader:a.a.createElement(ct.a,{component:"div"},"Projects you create")},a.a.createElement(ht.a,{button:!0,onClick:function(){return e.props.history.push("/app/projects/create")}},a.a.createElement(jt.a,null,a.a.createElement(Ot.a,null)),a.a.createElement(bt.a,{primary:"Create new project"})),this.props.projectCreatedData.projects.map(function(t){return a.a.createElement(ht.a,{button:!0,key:t.name,onClick:function(){return e.props.history.push("/app/projects/"+t._id+"/members")}},a.a.createElement(bt.a,{primary:t.name||"Unnamed"}),a.a.createElement(vt.a,null,a.a.createElement(lt.a,{onClick:function(){return e.props.history.push("/app/projects/"+t._id+"/update")}},a.a.createElement(Dt.a,null)),a.a.createElement(lt.a,{onClick:function(){return e.onClickDeleteProject(t)}},a.a.createElement(wt.a,null))))})),a.a.createElement(mt.a,null),a.a.createElement(at.a,{component:"nav",subheader:a.a.createElement(ct.a,{component:"div"},"Projects you assigned")},this.props.projectAssignData.projects.map(function(e){return a.a.createElement(ht.a,{button:!0,key:e.name},a.a.createElement(bt.a,{primary:e.name}))}))),a.a.createElement("main",{className:t.content},a.a.createElement("div",{className:t.toolbar}),a.a.createElement(qe.a,null,a.a.createElement(oe.a,{exact:!0,path:"/app",component:zt}),a.a.createElement(oe.a,{exact:!0,path:"/app/members",component:zt}),a.a.createElement(oe.a,{exact:!0,path:"/app/members/create",component:Vt}),a.a.createElement(oe.a,{exact:!0,path:"/app/projects/create",component:qt}),a.a.createElement(oe.a,{exact:!0,path:"/app/projects/:id/update",component:Zt}),a.a.createElement(oe.a,{exact:!0,path:"/app/projects/:id/members",component:hn}))))}}]),t}(r.Component),bn=Object(m.b)(function(e){return{projectCreatedData:e.projectCreatedData,projectAssignData:e.projectAssignData}},function(e){return{handeErrorProjectCreated:function(){return e({type:P})},getProjectCreated:function(){return e(Pt())},deleteProject:function(t){return e(Tt(t))},handeErrorProjectAssign:function(){return e({type:F})},getProjectAssign:function(){return e(Ut())}}})(Object(Ke.withStyles)(function(e){return{root:{display:"flex"},appBar:{zIndex:e.zIndex.drawer+1},appBarTitle:{flexGrow:1},appBarMenuButton:{marginLeft:-12,marginRight:20},drawer:{width:240,flexShrink:0},toolbar:e.mixins.toolbar,content:{flexGrow:1,padding:3*e.spacing.unit}}})(dn)),gn=function(){return a.a.createElement(ae.a,null,a.a.createElement("div",null,a.a.createElement(oe.a,{exact:!0,path:"/",component:$e}),a.a.createElement(Oe,{path:"/app",component:bn})))},jn=(n(326),function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return a.a.createElement(m.a,{store:re},a.a.createElement(gn,null))}}]),t}(r.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(a.a.createElement(jn,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[149,2,1]]]);
//# sourceMappingURL=main.72c17388.chunk.js.map